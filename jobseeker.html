<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Job Seeker Dashboard - WorkConnect PH</title>
        <link rel="stylesheet" href="assets/css/main.css">
        <link rel="stylesheet" href="assets/css/dashboard.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    </head>

    <body>
        <!-- Added loadingOverlay since JS uses it for API calls -->
        <div id="loadingOverlay" class="loading-overlay hidden">
            <div class="loading-spinner">
                <i class="bi bi-arrow-repeat"></i>
                <p>Loading...</p>
            </div>
        </div>
        
        <div class="dashboard">
            <div class="sidebar">
                <div class="brand">
                    <!-- Note: logo.png is likely a placeholder for one of the actual images -->
                    <img src="assets/images/logowhite.png" alt="WorkConnect PH Logo" class="logo">
                    <h3>Job Seeker</h3>
                </div>
                <ul id="sidebarMenu">
                    <li class="active-link" data-page="profile"><i class="bi bi-person-square"></i> Profile</li>
                    <li data-page="jobsearch"><i class="bi bi-search"></i> Job Search</li>
                    <li data-page="applications"><i class="bi bi-bar-chart"></i> Applications</li>
                    <li class="logout">
                        <!-- UPDATED link to use PHP logout script -->
                        <a href="logout.php" id="logoutBtn" style="color:white;text-decoration:none;">
                            <i class="bi bi-box-arrow-right"></i> Logout
                        </a>
                    </li>
                </ul>
            </div>

            <div class="main-content">
                <div class="notification-bell" id="notificationBell">
                    <i class="bi bi-bell-fill"></i>
                    <span class="notification-badge" id="notificationBadge">2</span>
                </div>

                <div id="content">
                    <!-- Profile Page -->
                    <div id="profilePage" class="page active">
                        <h2>My Profile</h2>
                        <form id="profileForm" class="profile-form">
                            <div class="form-row">
                                <label>Profile Picture</label>
                                <div class="logo-uploader">
                                    <div class="logo-preview" id="profilePreview">
                                        <span class="note"><i class="bi bi-person-fill"></i></span>
                                    </div>
                                    <label for="profileInput" class="file-upload">
                                        <i class="bi bi-cloud-upload"></i> Upload Photo
                                    </label>
                                    <input type="file" id="profileInput" accept="image/*">
                                </div>
                            </div>
                            <div class="form-row">
                                <label>Name</label>
                                <input type="text" id="profileName" value="Juan Dela Cruz" name="profileName" required>
                            </div>
                            <div class="form-row">
                                <label>Email</label>
                                <input type="email" id="profileEmail" value="juan@example.com" name="profileEmail" required>
                            </div>
                            <div class="form-row">
                                <label>Skills</label>
                                <input type="text" id="profileSkills" value="Web Development, Java, C++" name="profileSkills"
                                    placeholder="Add skills separated by commas">
                            </div>
                            <div class="form-row">
                                <label>Resume</label>
                                <div class="file-upload-group">
                                    <label for="resumeUpload" class="file-upload">
                                        <i class="bi bi-cloud-upload"></i> Upload Resume
                                    </label>
                                    <input type="file" id="resumeUpload" accept=".pdf,.doc,.docx">
                                    <span id="resumeFileName">No file chosen</span>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </form>
                    </div>

                    <!-- Job Search Page -->
                    <div id="jobSearchPage" class="page">
                        <h2>Available Jobs</h2>
                        <div class="search-container">
                            <input type="text" placeholder="Search jobs..." class="search-bar" id="jobSearchInput">
                        </div>
                        <div id="jobsList">
                            <div class="job-card">
                                <div class="job-info">
                                    <h4>Web Developer</h4>
                                    <p>TechCorp • Manila • Full-time</p>
                                    <p class="salary">₱40,000 - ₱60,000 / month</p>
                                    <p class="requirements">Requirements: HTML, CSS, JavaScript, React</p>
                                </div>
                                <button class="btn btn-primary apply-btn" data-job-id="1"
                                    data-job-title="Web Developer">Apply</button>
                            </div>
                            <div class="job-card">
                                <div class="job-info">
                                    <h4>Graphic Designer</h4>
                                    <p>Creatives Inc. • Cebu • Hybrid</p>
                                    <p class="salary">₱30,000 - ₱45,000 / month</p>
                                    <p class="requirements">Requirements: Photoshop, Illustrator, UI/UX Design</p>
                                </div>
                                <button class="btn btn-primary apply-btn" data-job-id="2"
                                    data-job-title="Graphic Designer">Apply</button>
                            </div>
                        </div>
                    </div>

                    <!-- Applications Page -->
                    <div id="applicationsPage" class="page">
                        <h2>Application Status</h2>
                        <div class="applications-container">
                            <div class="status-card pending">
                                <div class="status-header">
                                    <h4>Software Developer - TechCorp</h4>
                                    <span class="status-badge pending">Pending</span>
                                </div>
                                <div class="status-bar" data-progress="50">
                                    <!-- The bar itself is styled in JS now -->
                                </div>
                                <p class="status-note">Application under review</p>
                            </div>
                            <div class="status-card shortlisted">
                                <div class="status-header">
                                    <h4>Graphic Designer - Creatives Inc.</h4>
                                    <span class="status-badge shortlisted">Shortlisted</span>
                                </div>
                                <div class="status-bar" data-progress="100">
                                    <!-- The bar itself is styled in JS now -->
                                </div>
                                <p class="status-note">Interview scheduled for next week</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Apply Modal -->
        <div class="modal-overlay" id="applyModal" aria-hidden="true">
            <div class="modal" role="dialog" aria-labelledby="applyModalTitle">
                <button class="icon-btn close-modal" aria-label="Close dialog">&times;</button>
                <h3 id="applyModalTitle">Apply for Job</h3>
                <form id="applyForm">
                    <input type="hidden" id="applyJobId">
                    <input type="hidden" id="applyJobTitle">

                    <div class="form-group">
                        <label for="applyResume" class="form-label">Select Resume</label>
                        <!-- Assuming this is a temporary select, for real deployment it should use a file input or dynamically populated list of uploaded resumes -->
                        <select id="applyResume" class="form-input" required>
                            <option value="">Choose a resume</option>
                            <option value="resume1.pdf">My Resume.pdf</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="coverLetter" class="form-label">Cover Letter</label>
                        <textarea id="coverLetter" class="form-input" rows="4"
                            placeholder="Write your cover letter..."></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary full">Submit Application</button>
                </form>
            </div>
        </div>

        <!-- Notification Modal (Needed for modalManager to register without error) -->
        <div class="modal-overlay" id="notificationModal" aria-hidden="true">
            <div class="modal" role="dialog" aria-labelledby="notificationModalTitle">
                <button class="icon-btn close-modal" aria-label="Close dialog">&times;</button>
                <h3 id="notificationModalTitle">Notifications</h3>
                <div class="modal-body">
                    <p>No new notifications.</p>
                </div>
            </div>
        </div>

        <script src="assets/js/config.js"></script>
        <script src="assets/js/jobseeker.js"></script>
    </body>

</html>
